{% extends "base.html" %}
{% block title %}Create Admin - TenshiGuard{% endblock %}
{% block content %}
<div class="container" style="max-width: 820px;">
  <div class="card shadow border-0 my-4">
    <div class="card-body">
      <h4 class="mb-3">Create Admin Account</h4>
      <p class="text-muted mb-4">Plan: <strong>{{ plan.name }}</strong> â€” SOS voice-calls: <strong>{{ 'Enabled' if plan.supports_sos_voice else 'Disabled' }}</strong></p>

      <form method="POST" action="{{ url_for('register_flow.admin') }}">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Admin Username</label>
            <input name="username" class="form-control" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Admin Email</label>
            <input name="email" type="email" class="form-control" value="{{ defaults.email }}" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Password</label>
            <input name="password" type="password" class="form-control" value="{{ defaults.password }}" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Confirm Password</label>
            <input name="confirm_password" type="password" class="form-control" value="{{ defaults.password }}" required>
          </div>

          <div class="col-12"><hr></div>

          <div class="col-md-6">
            <label class="form-label">Alert Email</label>
            <input name="alert_email" type="email" class="form-control" value="{{ defaults.email }}">
          </div>

          {% if plan.supports_sos_voice %}
          <div class="col-md-6">
            <label class="form-label">SOS Phone (voice calls)</label>
            <input name="alert_phone" class="form-control" placeholder="+1 555 123 4567">
          </div>
          <div class="col-12">
            <div class="form-check mt-2">
              <input class="form-check-input" type="checkbox" id="sosCheck" name="voice_call_on_critical" {% if defaults.voice_allowed %}checked{% endif %}>
              <label class="form-check-label" for="sosCheck">
                Enable SOS voice-call on critical alerts
              </label>
            </div>
          </div>
          {% endif %}

          <div class="col-12"><hr></div>

          <div class="col-12">
            <label class="form-label">Enable Alert Types</label><br>
            {% for t in alert_types %}
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" name="enabled_types" value="{{ t }}" id="chk_{{ t }}">
                <label class="form-check-label" for="chk_{{ t }}">{{ t.replace('_',' ').title() }}</label>
              </div>
            {% endfor %}
          </div>

          <div class="col-12 mt-3">
            <button class="btn btn-primary w-100">Finish Setup</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
