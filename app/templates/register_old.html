{% extends "base.html" %}
{% block content %}

<div class="bg-grid"></div>
<div class="bg-grid-mask"></div>

<section class="registration-section">
  <div class="register-container">

    <!-- Progress Bar -->
    <div class="progress-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="steps">
        <span class="step active">Plan</span>
        <span class="step">Payment</span>
        <span class="step">Organization</span>
      </div>
    </div>

    <!-- Step 1: Choose Subscription Plan -->
    <div class="form-step active" id="step1">
      <h2 class="title text-center mb-4">Choose Your Plan</h2>
      <p class="subtitle text-center mb-5">Select the plan that fits your organization‚Äôs scale.</p>

      <div class="row plan-row">
        {% for sub in subscriptions %}
        <div class="col-md-4 mb-4">
          <div class="plan-card">
            <h3>{{ sub.name }}</h3>
            <p class="desc">{{ sub.description }}</p>
            <div class="price">${{ "%.2f"|format(sub.price) }}</div>
            <ul class="features">
              {% for f in sub.features %}
              <li>‚úî {{ f }}</li>
              {% endfor %}
            </ul>
            <button class="btn btn-primary select-plan" data-plan="{{ sub.id }}">Select Plan</button>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Step 2: Payment -->
    <div class="form-step" id="step2">
      <h2 class="title text-center mb-4">Payment Method</h2>
      <p class="subtitle text-center mb-4">Choose your preferred payment option.</p>

      <div class="payment-options">
        <div class="payment-card" data-method="credit">
          <i class="bi bi-credit-card"></i>
          <span>Credit / Debit Card</span>
        </div>
        <div class="payment-card" data-method="paypal">
          <i class="bi bi-paypal"></i>
          <span>PayPal</span>
        </div>
        <div class="payment-card" data-method="crypto">
          <i class="bi bi-currency-bitcoin"></i>
          <span>Crypto (BTC / USDT)</span>
        </div>
      </div>

      <div class="text-center mt-4">
        <button class="btn btn-secondary back-btn">Back</button>
        <button class="btn btn-primary next-btn">Proceed to Organization Setup</button>
      </div>
    </div>

    <!-- Step 3: Organization Setup -->
    <div class="form-step" id="step3">
      <h2 class="title text-center mb-4">Set Up Your Organization</h2>

      <form method="POST" id="orgForm">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Organization Name</label>
            <input type="text" name="org_name" class="form-control" required>
          </div>
          <div class="col-md-3 mb-3">
            <label class="form-label">Sector</label>
            <select class="form-control" name="sector" required>
              <option>Academic</option>
              <option>Healthcare</option>
              <option>Hospitality</option>
            </select>
          </div>
          <div class="col-md-3 mb-3">
            <label class="form-label">Location</label>
            <input type="text" name="location" class="form-control">
          </div>
        </div>

        <h5 class="section-title mt-4">üßë‚Äçüíº Admin Account</h5>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label">Username</label>
            <input type="text" name="admin_username" class="form-control" required>
          </div>
          <div class="col-md-4 mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="admin_email" class="form-control" required>
          </div>
          <div class="col-md-2 mb-3">
            <label class="form-label">Password</label>
            <input type="password" name="admin_password" class="form-control" required>
          </div>
          <div class="col-md-2 mb-3">
            <label class="form-label">Confirm</label>
            <input type="password" name="confirm_password" class="form-control" required>
          </div>
        </div>

        <div class="text-center mt-4">
          <button class="btn btn-secondary back-btn">Back</button>
          <button type="submit" class="btn btn-primary">Complete Registration</button>
        </div>
      </form>
    </div>
  </div>
</section>

<style>
.registration-section { padding: 60px 0; color: var(--text); }
.register-container {
  width: 100%;
  max-width: 1000px;
  margin: auto;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border: 1px solid var(--line);
  border-radius: 20px;
  padding: 30px;
  box-shadow: var(--shadow);
}
.progress-wrapper { margin-bottom: 40px; }
.progress-bar {
  width: 100%; height: 6px; background: var(--bg-2); border-radius: 999px;
  overflow: hidden; margin-bottom: 12px;
}
.progress-fill {
  height: 100%; width: 33%; background: var(--accent); transition: width .4s ease;
}
.steps { display: flex; justify-content: space-between; font-size: 14px; color: var(--muted); }
.steps .step.active { color: var(--accent); font-weight: 600; }

.plan-card {
  border: 1px solid var(--line);
  border-radius: 16px;
  background: rgba(255,255,255,0.03);
  text-align: center;
  padding: 25px 20px;
  box-shadow: var(--shadow);
  transition: all .3s ease;
}
.plan-card:hover {
  transform: translateY(-5px);
  border-color: var(--accent);
  box-shadow: 0 0 15px rgba(99,226,255,.25);
}
.plan-card h3 { color: var(--accent); font-weight: 700; }
.plan-card .price { font-size: 28px; font-weight: 800; margin: 10px 0; }
.plan-card .desc { color: var(--muted); }
.features { list-style: none; padding: 0; margin: 10px 0; text-align: left; }
.features li { color: var(--text); font-size: 14px; }

.payment-options {
  display: flex; justify-content: space-evenly; flex-wrap: wrap; gap: 20px;
}
.payment-card {
  width: 200px; height: 120px;
  border: 1px solid var(--line);
  border-radius: 12px;
  background: rgba(255,255,255,0.03);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 10px; cursor: pointer;
  transition: all .2s ease;
}
.payment-card:hover {
  border-color: var(--accent);
  background: rgba(99,226,255,0.08);
}
.payment-card.active {
  border-color: var(--accent);
  background: rgba(99,226,255,0.10);
  box-shadow: 0 0 15px rgba(99,226,255,.2);
}
.payment-card i { font-size: 36px; color: var(--accent); }
</style>

<script>
const steps = document.querySelectorAll(".form-step");
const progress = document.getElementById("progressFill");
let currentStep = 0;

document.querySelectorAll(".select-plan").forEach(btn => {
  btn.addEventListener("click", () => nextStep());
});

document.querySelectorAll(".next-btn").forEach(btn => {
  btn.addEventListener("click", () => nextStep());
});
document.querySelectorAll(".back-btn").forEach(btn => {
  btn.addEventListener("click", () => prevStep());
});

function nextStep() {
  steps[currentStep].classList.remove("active");
  currentStep++;
  steps[currentStep].classList.add("active");
  progress.style.width = ((currentStep + 1) / steps.length) * 100 + "%";
  document.querySelectorAll(".step")[currentStep].classList.add("active");
}
function prevStep() {
  steps[currentStep].classList.remove("active");
  currentStep--;
  steps[currentStep].classList.add("active");
  progress.style.width = ((currentStep + 1) / steps.length) * 100 + "%";
}
</script>

{% endblock %}
{% extends "base.html" %}
{% block content %}

<div class="bg-grid"></div>
<div class="bg-grid-mask"></div>

<section class="registration-section">
  <div class="register-container">

    <!-- Progress Bar -->
    <div class="progress-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="steps">
        <span class="step active">Plan</span>
        <span class="step">Payment</span>
        <span class="step">Organization</span>
      </div>
    </div>

    <!-- Step 1: Choose Subscription Plan -->
    <div class="form-step active" id="step1">
      <h2 class="title text-center mb-4">Choose Your Plan</h2>
      <p class="subtitle text-center mb-5">Select the plan that fits your organization‚Äôs scale.</p>

      <div class="row plan-row">
        {% for sub in subscriptions %}
        <div class="col-md-4 mb-4">
          <div class="plan-card">
            <h3>{{ sub.name }}</h3>
            <p class="desc">{{ sub.description }}</p>
            <div class="price">${{ "%.2f"|format(sub.price) }}</div>
            <ul class="features">
              {% for f in sub.features %}
              <li>‚úî {{ f }}</li>
              {% endfor %}
            </ul>
            <button class="btn btn-primary select-plan" data-plan="{{ sub.id }}">Select Plan</button>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Step 2: Payment -->
    <div class="form-step" id="step2">
      <h2 class="title text-center mb-4">Payment Method</h2>
      <p class="subtitle text-center mb-4">Choose your preferred payment option.</p>

      <div class="payment-options">
        <div class="payment-card" data-method="credit">
          <i class="bi bi-credit-card"></i>
          <span>Credit / Debit Card</span>
        </div>
        <div class="payment-card" data-method="paypal">
          <i class="bi bi-paypal"></i>
          <span>PayPal</span>
        </div>
        <div class="payment-card" data-method="crypto">
          <i class="bi bi-currency-bitcoin"></i>
          <span>Crypto (BTC / USDT)</span>
        </div>
      </div>

      <div class="text-center mt-4">
        <button class="btn btn-secondary back-btn">Back</button>
        <button class="btn btn-primary next-btn">Proceed to Organization Setup</button>
      </div>
    </div>

    <!-- Step 3: Organization Setup -->
    <div class="form-step" id="step3">
      <h2 class="title text-center mb-4">Set Up Your Organization</h2>

      <form method="POST" id="orgForm">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Organization Name</label>
            <input type="text" name="org_name" class="form-control" required>
          </div>
          <div class="col-md-3 mb-3">
            <label class="form-label">Sector</label>
            <select class="form-control" name="sector" required>
              <option>Academic</option>
              <option>Healthcare</option>
              <option>Hospitality</option>
            </select>
          </div>
          <div class="col-md-3 mb-3">
            <label class="form-label">Location</label>
            <input type="text" name="location" class="form-control">
          </div>
        </div>

        <h5 class="section-title mt-4">üßë‚Äçüíº Admin Account</h5>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label">Username</label>
            <input type="text" name="admin_username" class="form-control" required>
          </div>
          <div class="col-md-4 mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="admin_email" class="form-control" required>
          </div>
          <div class="col-md-2 mb-3">
            <label class="form-label">Password</label>
            <input type="password" name="admin_password" class="form-control" required>
          </div>
          <div class="col-md-2 mb-3">
            <label class="form-label">Confirm</label>
            <input type="password" name="confirm_password" class="form-control" required>
          </div>
        </div>

        <div class="text-center mt-4">
          <button class="btn btn-secondary back-btn">Back</button>
          <button type="submit" class="btn btn-primary">Complete Registration</button>
        </div>
      </form>
    </div>
  </div>
</section>

<style>
.registration-section { padding: 60px 0; color: var(--text); }
.register-container {
  width: 100%;
  max-width: 1000px;
  margin: auto;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border: 1px solid var(--line);
  border-radius: 20px;
  padding: 30px;
  box-shadow: var(--shadow);
}
.progress-wrapper { margin-bottom: 40px; }
.progress-bar {
  width: 100%; height: 6px; background: var(--bg-2); border-radius: 999px;
  overflow: hidden; margin-bottom: 12px;
}
.progress-fill {
  height: 100%; width: 33%; background: var(--accent); transition: width .4s ease;
}
.steps { display: flex; justify-content: space-between; font-size: 14px; color: var(--muted); }
.steps .step.active { color: var(--accent); font-weight: 600; }

.plan-card {
  border: 1px solid var(--line);
  border-radius: 16px;
  background: rgba(255,255,255,0.03);
  text-align: center;
  padding: 25px 20px;
  box-shadow: var(--shadow);
  transition: all .3s ease;
}
.plan-card:hover {
  transform: translateY(-5px);
  border-color: var(--accent);
  box-shadow: 0 0 15px rgba(99,226,255,.25);
}
.plan-card h3 { color: var(--accent); font-weight: 700; }
.plan-card .price { font-size: 28px; font-weight: 800; margin: 10px 0; }
.plan-card .desc { color: var(--muted); }
.features { list-style: none; padding: 0; margin: 10px 0; text-align: left; }
.features li { color: var(--text); font-size: 14px; }

.payment-options {
  display: flex; justify-content: space-evenly; flex-wrap: wrap; gap: 20px;
}
.payment-card {
  width: 200px; height: 120px;
  border: 1px solid var(--line);
  border-radius: 12px;
  background: rgba(255,255,255,0.03);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 10px; cursor: pointer;
  transition: all .2s ease;
}
.payment-card:hover {
  border-color: var(--accent);
  background: rgba(99,226,255,0.08);
}
.payment-card.active {
  border-color: var(--accent);
  background: rgba(99,226,255,0.10);
  box-shadow: 0 0 15px rgba(99,226,255,.2);
}
.payment-card i { font-size: 36px; color: var(--accent); }
</style>

<script>
const steps = document.querySelectorAll(".form-step");
const progress = document.getElementById("progressFill");
let currentStep = 0;

document.querySelectorAll(".select-plan").forEach(btn => {
  btn.addEventListener("click", () => nextStep());
});

document.querySelectorAll(".next-btn").forEach(btn => {
  btn.addEventListener("click", () => nextStep());
});
document.querySelectorAll(".back-btn").forEach(btn => {
  btn.addEventListener("click", () => prevStep());
});

function nextStep() {
  steps[currentStep].classList.remove("active");
  currentStep++;
  steps[currentStep].classList.add("active");
  progress.style.width = ((currentStep + 1) / steps.length) * 100 + "%";
  document.querySelectorAll(".step")[currentStep].classList.add("active");
}
function prevStep() {
  steps[currentStep].classList.remove("active");
  currentStep--;
  steps[currentStep].classList.add("active");
  progress.style.width = ((currentStep + 1) / steps.length) * 100 + "%";
}
</script>

{% endblock %}
